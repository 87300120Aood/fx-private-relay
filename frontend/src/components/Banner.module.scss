@use "~@mozilla-protocol/core/protocol/css/includes/lib" as mp;
@use "~@mozilla-protocol/core/protocol/css/includes/forms/lib" as mp_forms;
@use "../styles/tokens";

.banner {
  border-radius: mp.$border-radius-md;
  padding: mp.$spacing-md;
  background-color: tokens.$color-white;
  position: relative;
  box-shadow: mp.$box-shadow-sm;

  &.promo {
    // This is the gradient border width (which is implemented as a background image):
    padding: 2px;
    box-shadow: none;
    background-image: tokens.$firefoxGradient;
  }

  &.warning {
    padding: mp.$spacing-sm;
  }

  &.info {
    @include mp.text-body-sm;

    @media screen and #{mp.$mq-sm} {
      padding: 0 mp.$spacing-sm;
    }
  }

  .dismiss-button {
    position: absolute;
    top: mp.$spacing-sm;
    right: mp.$spacing-sm;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    background-color: transparent;
    border-style: none;
    border-radius: mp.$border-radius-sm;
    cursor: pointer;
    padding: 0;

    &:hover {
      background-color: tokens.$color-blue-50;
      color: tokens.$color-white;
    }
  }
}

.highlight-wrapper {
  display: flex;
  background-color: tokens.$color-white;
  flex-wrap: wrap;

  .banner.promo & {
    // .banner's border-radius - .banner's padding.
    // This is what makes .banner.promo appear as a 2px-wide border:
    border-radius: calc(mp.$border-radius-md - 2px);
  }

  .title-and-large-cta-wrapper {
    display: flex;
    flex-wrap: wrap;
    flex: 1 1 mp.$content-xs;
    padding: mp.$spacing-xs mp.$spacing-md mp.$spacing-md mp.$spacing-md;

    .title-text {
      flex: 1 1 auto;

      .banner.warning & {
        @media screen and #{mp.$mq-sm} {
          padding-left: mp.$spacing-md;
          border-left-width: 4px;
          border-left-style: solid;
          border-color: tokens.$color-yellow-50;
        }
      }
    }

    @media screen and #{mp.$mq-sm} {
      padding: mp.$spacing-md;
    }
    @media screen and #{mp.$mq-lg} {
      flex-wrap: nowrap;
    }
  }

  .info-icon {
    align-self: center;
    color: tokens.$color-violet-30;
  }
}

.illustration {
  display: flex;
  align-items: center;
  padding: mp.$spacing-md mp.$spacing-md 0 mp.$spacing-md;

  @media screen and #{mp.$mq-md} {
    padding: 0 mp.$spacing-md 0 mp.$spacing-xl;
  }

  img {
    max-width: 100px;
  }
}

// For Banners in PremiumPromoBanners.tsx
.flex-end {
  border-bottom: 1px solid mp.$color-light-gray-20;
  align-items: center;
  margin: 0 mp.$spacing-md;
  padding-top: mp.$spacing-sm;
  width: 100%;

  @media screen and #{mp.$mq-sm} {
    border-bottom: none;
    padding: none;
    width: auto;
    margin: 0;
  }
  @media screen and #{mp.$mq-lg} {
    align-items: flex-end;
  }

  img {
    width: 90px;
    margin: 0 auto;

    @media screen and #{mp.$mq-sm} {
      margin: 0;
    }
  }
}

.title {
  @include mp.text-title-3xs;
  font-family: mp.$font-stack-firefox;
  display: flex;
  align-items: center;
  padding: mp.$spacing-sm 0 mp.$spacing-md 0;

  .banner.info & {
    @include mp.text-body-sm;
    font-family: mp.$font-stack-base;
    font-weight: 600;
  }

  .icon {
    flex: 0 0 auto;
    margin-right: mp.$spacing-sm;

    .warning & {
      color: tokens.$color-yellow-50;
    }

    .info & {
      color: tokens.$color-violet-30;
      margin-right: mp.$spacing-xs;
    }
  }
}

.cta {
  a,
  button {
    display: inline-block;
    padding-top: mp.$spacing-md;
    font-weight: 700;
    color: tokens.$color-blue-50;
    cursor: pointer;
    background: none;
    border: none;

    .banner.info & {
      font-weight: 500;
      text-decoration: underline;
      padding: mp.$spacing-sm 0 0 0;
    }

    &:hover {
      color: tokens.$color-blue-40;
    }

    &:focus {
      outline: none;
      text-decoration: underline;
    }
  }
}

.cta-large-button {
  padding-top: mp.$spacing-md;
  flex: 0 0 auto;
  align-self: center;

  @media screen and #{mp.$mq-md} {
    align-self: center;
    margin: 0 0 0 auto;
    padding: mp.$spacing-md;
  }

  a {
    display: block;
    padding: mp.$spacing-sm mp.$spacing-md;
    font-weight: 700;
    border: 2px solid tokens.$color-blue-50;
    color: tokens.$color-blue-50;
    border-radius: mp.$border-radius-sm;

    &:hover {
      background-color: tokens.$color-blue-60;
      color: tokens.$color-white;
    }

    &:focus {
      border-color: mp_forms.$button-border-color-focus;
      box-shadow: mp_forms.$field-focus-ring;
      outline: none;
    }
  }
}
