@use "../../../styles/tokens";
@use "~@mozilla-protocol/core/protocol/css/includes/lib" as mp;
@use "~@mozilla-protocol/core/protocol/css/includes/forms/lib" as mp_forms;

// Resolves mobile extra spacing issues for 2nd step of updated free onboarding (MPP-3597).
.alias-list-container {
  width: 100%;
}

.controls {
  display: grid;
  grid-template-columns: auto 1fr auto;
  row-gap: mp.$spacing-md;
  grid-template-areas:
    "stringFilterToggle categoryFilter newAliasButton"
    "stringFilter stringFilter stringFilter";
  align-items: center;
  padding: mp.$spacing-md 0;
  // The focus indicators of contained elements can overflow:
  overflow: visible;

  .string-filter {
    grid-area: stringFilter;
  }

  .string-filter-toggle {
    grid-area: stringFilterToggle;
  }

  .category-filter {
    grid-area: categoryFilter;
  }

  .new-alias-button {
    grid-area: newAliasButton;
  }

  @media screen and #{mp.$mq-md} {
    grid-template-areas: "stringFilter categoryFilter newAliasButton";

    .string-filter-toggle {
      display: none;
    }
  }
}

.alias-card-wrapper {
  padding-top: mp.$spacing-lg;
  list-style-type: none;

  &:first-child {
    padding-top: 0;
  }
}

.string-filter-toggle {
  background-color: transparent;
  color: mp.$color-dark-gray-50;
  border-radius: 100%;
  border-style: none;
  padding: mp.$spacing-sm;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;

  &.active,
  &:hover {
    background-color: mp.$color-white;
    color: mp.$color-blue-50;
  }

  img {
    filter: grayscale(1);
  }

  &:hover img {
    filter: none;
  }
}

.string-filter {
  display: none;
  position: relative;

  &.is-visible {
    display: block;
  }

  @media screen and #{mp.$mq-md} {
    display: block;
  }

  input {
    @include mp_forms.form-input;
    margin: 0;
    background-image: url("/icons/search-blue.svg");
    background-repeat: no-repeat;
    background-position: left mp.$spacing-sm top 50%;
    // The search icon is 20px wide, surrounded by padding:
    padding-left: calc(mp.$spacing-sm + 20px + mp.$spacing-sm);
    // Leave some space on the right for `.match-count`
    padding-right: calc(mp.$spacing-sm + 30px);
    width: 100%;

    @media screen and #{mp.$mq-md} {
      width: auto;
    }
  }

  .match-count {
    opacity: 0;
    transition: opacity 200ms;
    position: absolute;
    transform: translateX(-100%);
    padding: mp.$spacing-sm;
  }
  // Show the counter when the search field is focused
  // or has a value:
  input:not(:placeholder-shown) + .match-count,
  input:focus + .match-count {
    opacity: 1;
    // Make sure input in the input field isn't shown in the background
    background-color: mp.$color-white;
    // Then give it the same borders as the input it's covering...
    @include mp_forms.form-input;
    // ...except where it intersects with the input:
    border-left: 0 solid transparent;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }
}

.category-filter {
  padding-left: mp.$spacing-xs;

  @media screen and #{mp.$mq-md} {
    padding-left: mp.$spacing-md;
  }
}

.empty-state-message {
  background-color: mp.$color-white;
  border-radius: mp.$border-radius-md;
  padding: mp.$spacing-lg;

  .clear-filters-button {
    background-color: transparent;
    border-style: none;
    color: mp.$color-blue-50;
    text-decoration: underline;
    cursor: pointer;

    &:hover {
      color: mp.$color-blue-40;
    }
  }
}
